<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes"><!-- 删除苹果默认的工具栏和菜单栏 -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black"><!-- 设置苹果工具栏颜色 -->
    <meta name="format-detection" content="telphone=no, email=no"><!-- 忽略页面中的数字识别为电话，忽略email识别 -->
    <title>聽花,找愛 花现</title>
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="Content/css/swiper.min.css" type="text/css">
    <link rel="stylesheet" href="Content/css/css.css" type="text/css">
    <!-- Demo styles -->
    <style>
        html, body {
            position: relative;
            height: 100%;
        }
        body {
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 14px;
            color:#000;
            margin: 0;
            padding: 0;
        }
        /*.swiper-slide {*/
        /*background: #000;*/
        /*}*/
        .img_2{
            display:none;
            position: absolute;
            top:100%;
            left: 0;
            z-index: 999;
            width: 100%;
            background-size:cover;
            background-repeat: no-repeat;
            /*padding-bottom: 50px;*/
        }
        .swiper-container{
            /*padding-bottom: 50px;*/
        }
        .img_1{

            width: 100%;
            /*padding-bottom: 50px;*/

        }

    </style>
</head>
<body style="max-width: 750px;margin: 0 auto;">
<!-- Swiper -->

<div class="swiper-container swiper-container-vertical">

    <div class="swiper-wrapper" id="swiper">


        <div class="swiper-slide">
            <div class="img_1">
                <img src="http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/305fb4a4583740389ce368196b90c111.jpg">
            </div>
            <div class="img_2">
                <img  src="http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/df948f53fe254caf8f828b931b2c53a7.png">
            </div>

        </div>
        <div class="swiper-slide ">
            <!--<div class="img_1" style="background-image:url(http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/96c7226218074022afc170cabdb382fe.jpg)">-->
            <!--</div>-->
            <!--<div class="img_2" style="background-image: url(http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/03e66a5fa93c4eac8c4bfb6df1c95154.png)">-->
            <!--</div>-->
            <div class="img_1">
                <img src="http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/96c7226218074022afc170cabdb382fe.jpg">
            </div>
            <div class="img_2">
                <img  src="http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/03e66a5fa93c4eac8c4bfb6df1c95154.png">
            </div>
        </div>
        <div class="swiper-slide " >
            <div class="img_1">
                <img  src="http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/144b7f875f3f41029265244282aa80ed.jpg">
            </div>
            <div class="img_2">
                <img  src="http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/03e66a5fa93c4eac8c4bfb6df1c95154.png">
            </div>
        </div>
        <div class="swiper-slide " >
            <div class="img_1">
                <img src="http://tinghua.img-cn-beijing.aliyuncs.com/HuaXian/297467e0a7d2471cb0b412afbccc517b.jpg">
            </div>
        </div>
        <div class="swiper-slide" id="swiper1">
            <div class="imgbox">
                <p class="xgtj">相关推荐</p>
                <ul class="rmshop" id="rmshop" style="overflow-y: auto; padding-bottom: 70px; height: 637px;">
                    <li>
                        <a href="/Good/Index/305">
                            <div class="rm-imgbox pr">
                                <img src="http://tinghua.img-cn-beijing.aliyuncs.com/Goods/47b0fd1fd95a45a5a3810d476875fb28.png">
                            </div>
                            <p class="rmspname">听花 | 礼品花束 又见梦露</p>
                            <p class="gn">余光是你，余生也是你~</p>
                            <p class="jexl">¥<span class="je">368</span> </p>
                        </a>
                    </li>
                    <li>
                        <a href="/Good/Index/303">
                            <div class="rm-imgbox pr">
                                <img src="http://tinghua.img-cn-beijing.aliyuncs.com/Goods/cc75330d0a054d458e815f0b160d5852.png">
                            </div>
                            <p class="rmspname">听花 | 礼品花束 梦露之约</p>
                            <p class="gn">时光易逝尚有你~</p>
                            <p class="jexl">¥<span class="je">198</span> </p>
                        </a>
                    </li>
                    <li>
                        <a href="/Good/Index/302">
                            <div class="rm-imgbox pr">
                                <img src="http://tinghua.img-cn-beijing.aliyuncs.com/Goods/e130212b48e444f0904eb32478b63efb.jpg">
                            </div>
                            <p class="rmspname">听花 | 礼品花束 遇见·梦露</p>
                            <p class="gn">梦露款，你的专属定制~</p>
                            <p class="jexl">¥<span class="je">98</span> </p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>


    </div>

</div>

<div class="foot3 pr">
    <img src="Content/img/ft.png">
    <a href="http://a.app.qq.com/o/simple.jsp?pkgname=com.tinghua.listenflowers" class="xzan"></a>
</div>
<!-- Swiper JS -->
<script src="Content/js/swiper.min.js"></script>
<script src="Content/js/jquery-2.2.4.min.js"></script>

<!-- Initialize Swiper -->
<script>
    $(function () {
        var hie=$(window).height();
        var width=$(window).width();
        if(width>750){
            width=750;
        }
        var conTop=0;
        var zqsz=0;
        var kfhd=false;
        $("#rmshop li").css({width:(width-10)/2});
        $("#rmshop li img").css({"width":(width-10)/2-20,"height":(width-10)/2-20});
        $('#rmshop').css({"height":hie-30});

        var myswiper = new Swiper('.swiper-container', {
            //onlyExternal : true,//禁止触摸滑动
            //virtualTranslate : true,
            followFinger : false,//拖动 不会滑动 释放才会动
            preloadImages:true,
            direction: 'vertical',
            slidesPerView: '1',
            resistanceRatio : 0,
            noSwiping : true,
            onTouchMove:function (swiper) {

                var sollTop=$(".swiper-slide-active").scrollTop();
                var sz=swiper.touches.startY-swiper.touches.currentY;
                //conTop=sollTop+sz;
                if(sz>0&&sz>5){
                    $(".swiper-slide-active").scrollTop(sollTop+20);
                }else  if(sz<0&&-sz>5){
                    $(".swiper-slide-active").scrollTop(sollTop-20);
                }
                console.log(kfhd)
                console.log("移动："+sollTop+"数值："+sz);

            },
            onTouchEnd: function(swiper){
                console.log(swiper)
                var fx=swiper.touches.startY-swiper.touches.currentY;
                var $this =$(".swiper-slide-active"),
                    viewH =$this.height(),//可见高度
                    contentH =$this.get(0).scrollHeight,//内容高度
                    scrollTop =$this.scrollTop();//滚动高度
                if(contentH - viewH - scrollTop ===0 ) { //到达底部100px时,加载新内容
                    //console.log(sollTop);
                    kfhd=true;
                }
                if(fx>0&&fx>5){
                    console.log("向上滑"+fx+"px");
                        if($(".swiper-slide-active").find('.img_2').is(":hidden")){
                            $(".swiper-slide-active").find('.img_2').show().animate({top:"0px"},150);
                            myswiper.lockSwipes();//阻止滑动
                        }else if(kfhd==true){
                            myswiper.unlockSwipes();//滑动
                            myswiper.slideNext();
                        }else {
                            myswiper.lockSwipes();//阻止滑动
                        }


                }else if(fx < 0 && -fx > 5) {
                    console.log("向下滑"+-fx);
                    if($(".swiper-slide-active").scrollTop()!=0){
                        //$(".swiper-slide-active").scrollTop(fx-10);
                        kfhd=false;
                        myswiper.lockSwipes();//阻止滑动
                    }else if($(".swiper-slide-active").scrollTop()==0){
                        if($(".swiper-slide-active").find('.img_2').is(":visible")){
                            $(".swiper-slide-active").find('.img_2').hide().css({"top":"100%"});
                            myswiper.lockSwipes();//阻止滑动
                        }else {
                            myswiper.unlockSwipes();//滑动
                            myswiper.slidePrev();
                        }
                    }
                }
            },
            onSlideChangeEnd: function(swiper){
                $(".swiper-slide .img_2").hide().css({"top":"100%"});
                //$(".swiper-slide").scrollTop(0);
                kfhd=false;
                //$(".swiper-slide").addClass('swiper-no-swiping');
            }
        });

    });
</script>





</body>
</html>




