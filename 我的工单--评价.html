<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,maximum-scale=1.0,user-scalable=no;">
    <title>评价</title>
    <script src="Content/js/jquery-2.2.4.min.js"></script>
    <link rel="stylesheet" href="Content/css/m.css">
    <script src="Content/js/layer-mobl.js"></script>
    <link rel="stylesheet" href="Content/css/font-A.css">
</head>
<body style="max-width: 750px; margin: 0 auto">
<div class="btnbox" id="btnbox">
<a class="djbtn" href="javascript:;"><i class="fa fa-thumbs-up"></i> 满意</a>
<a class="djbtn" href="javascript:;" id="kl"><i class="fa fa-thumbs-down"></i> 不满意</a>
</div>
 <div class="xlkl">
     <img src="Content/img/xl.png" class="xl">
     <img src="Content/img/kl.png" class="kl">
 </div>
<div>
<p class="p6">您的满意是我们不断前进的动力。</p>
    <p class="p7">您的意见我们会采纳改进的哦！</p>
</div>
<ul class="yjbox">
    <li>1 . 未能解决您的问题</li>
    <li>2 . 回复时效</li>
    <li>3 . 客服态度</li>
    <li>4 . 其他</li>
</ul>

<div class="weui_cells weui_cells_form" style="display: none">
    <div class="weui_cell">
        <div class="weui_cell_bd weui_cell_primary">
            <textarea class="weui_textarea" placeholder="意见或建议(选填)" rows="4" style="font-size: 14px" maxlength="300"></textarea>
            <div class="weui_textarea_counter"><span class="num">0</span>/300</div>
        </div>
    </div>
</div>
<a class="pjbnt" id="pjbnt">评价</a>

<script>
    $(function () {
        $("#btnbox a").on('click',function () {
            $(this).addClass("ydz").siblings().removeClass("ydz");
            if($("#kl").hasClass("ydz")){
                $(".kl").show().siblings().hide();
                $(".p7").show().siblings().hide();
                $(".yjbox").show();
                $(".weui_cells").show();
                $("#pjbnt").removeClass("ypj");
            }else {
              $(".xl").show().siblings().hide();
                $(".p6").show().siblings().hide();
                $(".yjbox").hide();
                $(".weui_cells").hide();
          }
        });
        //计算输入的文字数量
        $(".weui_textarea").on('input',function () {
            $(".num").html( ($(this).val().length));
        });

        $(".yjbox li").on('click',function () {
            $(this).addClass("yxz").siblings().removeClass()
        });
        $("#pjbnt").on('click',function () {//点击评论按钮
            if($(this).hasClass("ypj")){//如果该按钮有ypj 就弹出提示
                layer.open({
                    content: '已经评价过了哦~',
                    btn: ['确认', '取消'],
                    shadeClose: false,
                    yes: function () {
                        window.history.go(-1)
                    },
                    no: function () {
                    }
                });
                return false;
            }else if($(".btnbox a").hasClass('ydz')){//否则如果 满意被选中 就弹出评价成功提示
                $(this).addClass('ypj');
                layer.open({content:"评价成功",time:1});
            }else {//满意或不满意为空就提示
               layer.open({content:"请选择满意或不满意",time:1});
            }
            if($(".yjbox li").hasClass('yxz')){//选中不满意弹出已经列表，如果li里面有yxz 就给评论按钮添加ypl class
               $(this).addClass('ypj');

            }else if($(".yjbox").is(":visible")) {//
               layer.open({content:"请选择不满意原因",time:1});
                $(this).removeClass('ypj');
            }
        });
    })
</script>
</body>
</html>

